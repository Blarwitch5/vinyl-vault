---
import Bell from '@lucide/astro/icons/bell'
import Disc3 from '@lucide/astro/icons/disc-3'
import Logs from '@lucide/astro/icons/logs'
import Search from '@lucide/astro/icons/search'
import SidebarBottomMenu from '../components/SidebarBottomMenu.astro'
import SidebarMenu from '../components/SidebarMenu.astro'
import SidebarSecondaryMenu from '../components/SidebarSecondaryMenu.astro'
import ThemeSwitcher from '../components/ui/ThemeSwitcher.astro'

type Props = {
  title?: string
  currentPath?: string
}

const { title, currentPath = "/dashboard" } = Astro.props
---

<div class="bg-neutral-50 antialiased dark:bg-neutral-950">
  <!-- Navbar flottante -->
  <nav
    class="fixed top-4 right-4 left-4 z-50 rounded-2xl border border-neutral-300/40 bg-white/75 px-2 py-1.5 shadow-sm backdrop-blur-xl backdrop-saturate-150 sm:top-6 sm:right-6 sm:left-6 sm:px-4 sm:py-2.5 dark:border-neutral-700/40 dark:bg-neutral-900/60"
    transition:name="navbar"
  >
    <div class="flex flex-wrap items-center justify-between">
      <div class="flex items-center justify-start">
        <button
          data-drawer-target="drawer-navigation"
          data-drawer-toggle="drawer-navigation"
          aria-controls="drawer-navigation"
          class="mr-1 cursor-pointer rounded-lg p-1.5 text-neutral-600 hover:bg-neutral-100 hover:text-neutral-900 focus:bg-neutral-100 focus:ring-1 focus:ring-neutral-300 sm:mr-2 sm:p-2 md:hidden dark:text-neutral-400 dark:hover:bg-neutral-800 dark:hover:text-neutral-100 dark:focus:bg-neutral-800 dark:focus:ring-neutral-600"
        >
          <Logs size={24} class="h-4 w-4 sm:h-6 sm:w-6" />
          <span class="sr-only">Commute le menu</span>
        </button>
        <a href="/" class="mr-4 flex items-center justify-between">
          <div
            class="bg-gradient-rock mr-2 flex h-6 w-6 items-center justify-center rounded-lg sm:mr-3 sm:h-8 sm:w-8"
          >
            <Disc3 size={20} class="size-4 text-white sm:size-5" />
          </div>
          <!-- Logo responsive : icÃ´ne seule sur mobile, VV sur tablette, VinylVault sur desktop -->
          <span
            class="hidden self-center text-lg font-semibold whitespace-nowrap sm:block sm:text-2xl md:hidden dark:text-neutral-100"
            >VV</span
          >
          <span
            class="hidden self-center text-lg font-semibold whitespace-nowrap sm:text-2xl md:block dark:text-neutral-100"
            >VinylVault</span
          >
        </a>
        <form action="#" method="GET" class="hidden md:block md:pl-2">
          <label for="topbar-search" class="sr-only">Rechercher</label>
          <div class="relative md:w-64">
            <div
              class="pointer-events-none absolute inset-y-0 left-0 flex items-center p-2 sm:p-2.5"
            >
              <Search size={20} class="size-4 text-neutral-500 sm:size-5 dark:text-neutral-400" />
            </div>
            <input
              type="text"
              name="email"
              id="topbar-search"
              class="block w-full rounded-lg border border-neutral-300 bg-neutral-50 p-2.5 pl-10 text-sm text-neutral-900 focus:border-orange-500 focus:ring-orange-500 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100 dark:placeholder-neutral-400 dark:focus:border-orange-500 dark:focus:ring-orange-500"
              placeholder="Rechercher"
            />
          </div>
        </form>
      </div>
      <div class="flex items-center lg:order-2">
        <button
          type="button"
          data-drawer-toggle="drawer-navigation"
          aria-controls="drawer-navigation"
          class="mr-0.5 rounded-lg p-1.5 text-neutral-500 hover:bg-neutral-100 hover:text-neutral-900 focus:ring-1 focus:ring-neutral-300 sm:mr-1 sm:p-2.5 md:hidden dark:text-neutral-400 dark:hover:bg-neutral-800 dark:hover:text-neutral-100 dark:focus:ring-neutral-600"
        >
          <span class="sr-only">Basculer la recherche</span>
          <Search size={20} class="size-4 sm:size-5" />
        </button>
        <!-- Notifications -->
        <button
          type="button"
          data-dropdown-toggle="notification-dropdown"
          class="mr-0.5 rounded-lg p-1.5 text-neutral-500 hover:text-neutral-900 focus:ring-1 focus:ring-neutral-300 sm:mr-1 sm:p-2.5 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-100 dark:focus:ring-neutral-600"
        >
          <span class="sr-only">Voir les notifications</span>
          <!-- Bell icon -->
          <Bell size={24} class="size-4 sm:size-5" />
        </button>
        <!-- Dropdown menu -->
        <div
          class="z-50 my-4 hidden max-w-sm list-none divide-y divide-neutral-100 overflow-hidden rounded-xl bg-white text-base shadow-lg dark:divide-neutral-600 dark:bg-neutral-700"
          id="notification-dropdown"
        >
          <div
            class="block bg-neutral-50 px-4 py-2 text-center text-base font-medium text-neutral-700 dark:bg-neutral-600 dark:text-neutral-300"
          >
            Notifications
          </div>
          <div>
            <a
              href="#"
              class="flex border-b px-4 py-3 hover:bg-neutral-100 dark:border-neutral-600 dark:hover:bg-neutral-600"
            >
              <div class="flex-shrink-0">
                <img
                  class="h-11 w-11 rounded-full"
                  src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/bonnie-green.png"
                  alt="Bonnie Green avatar"
                />
                <div
                  class="absolute -mt-5 ml-6 flex h-5 w-5 items-center justify-center rounded-full border border-white bg-orange-700 dark:border-neutral-700"
                >
                  <svg
                    aria-hidden="true"
                    class="h-3 w-3 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M8.707 7.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l2-2a1 1 0 00-1.414-1.414L11 7.586V3a1 1 0 10-2 0v4.586l-.293-.293z"
                    ></path>
                    <path
                      d="M3 5a2 2 0 012-2h1a1 1 0 010 2H5v7h2l1 2h4l1-2h2V5h-1a1 1 0 110-2h1a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5z"
                    ></path>
                  </svg>
                </div>
              </div>
              <div class="w-full pl-3">
                <div class="mb-1.5 text-sm font-normal text-neutral-500 dark:text-neutral-400">
                  New message from
                  <span class="font-semibold text-neutral-900 dark:text-white">Bonnie Green</span>:
                  "Hey, what's up? All set for the presentation?"
                </div>
                <div class="text-gradient-rock text-xs font-medium">a few moments ago</div>
              </div>
            </a>
            <a
              href="#"
              class="flex border-b px-4 py-3 hover:bg-neutral-100 dark:border-neutral-600 dark:hover:bg-neutral-600"
            >
              <div class="flex-shrink-0">
                <img
                  class="h-11 w-11 rounded-full"
                  src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/jese-leos.png"
                  alt="Jese Leos avatar"
                />
                <div
                  class="absolute -mt-5 ml-6 flex h-5 w-5 items-center justify-center rounded-full border border-white bg-neutral-900 dark:border-neutral-700"
                >
                  <svg
                    aria-hidden="true"
                    class="h-3 w-3 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"
                    ></path>
                  </svg>
                </div>
              </div>
              <div class="w-full pl-3">
                <div class="mb-1.5 text-sm font-normal text-neutral-500 dark:text-neutral-400">
                  <span class="font-semibold text-neutral-900 dark:text-white">Jese leos</span>
                  and
                  <span class="font-medium text-neutral-900 dark:text-white">5 others</span>
                  started following you.
                </div>
                <div class="text-gradient-rock text-xs font-medium">10 minutes ago</div>
              </div>
            </a>
            <a
              href="#"
              class="flex border-b px-4 py-3 hover:bg-neutral-100 dark:border-neutral-600 dark:hover:bg-neutral-600"
            >
              <div class="flex-shrink-0">
                <img
                  class="h-11 w-11 rounded-full"
                  src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/joseph-mcfall.png"
                  alt="Joseph McFall avatar"
                />
                <div
                  class="absolute -mt-5 ml-6 flex h-5 w-5 items-center justify-center rounded-full border border-white bg-red-600 dark:border-neutral-700"
                >
                  <svg
                    aria-hidden="true"
                    class="h-3 w-3 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                      clip-rule="evenodd"></path>
                  </svg>
                </div>
              </div>
              <div class="w-full pl-3">
                <div class="mb-1.5 text-sm font-normal text-neutral-500 dark:text-neutral-400">
                  <span class="font-semibold text-neutral-900 dark:text-white">Joseph Mcfall</span>
                  and
                  <span class="font-medium text-neutral-900 dark:text-white">141 others</span>
                  love your story. See it and view more stories.
                </div>
                <div class="text-gradient-rock text-xs font-medium">44 minutes ago</div>
              </div>
            </a>
            <a
              href="#"
              class="flex border-b px-4 py-3 hover:bg-neutral-100 dark:border-neutral-600 dark:hover:bg-neutral-600"
            >
              <div class="flex-shrink-0">
                <img
                  class="h-11 w-11 rounded-full"
                  src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/roberta-casas.png"
                  alt="Roberta Casas image"
                />
                <div
                  class="absolute -mt-5 ml-6 flex h-5 w-5 items-center justify-center rounded-full border border-white bg-green-400 dark:border-neutral-700"
                >
                  <svg
                    aria-hidden="true"
                    class="h-3 w-3 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"
                      clip-rule="evenodd"></path>
                  </svg>
                </div>
              </div>
              <div class="w-full pl-3">
                <div class="mb-1.5 text-sm font-normal text-neutral-500 dark:text-neutral-400">
                  <span class="font-semibold text-neutral-900 dark:text-white"
                    >Leslie Livingston</span
                  >
                  mentioned you in a comment:
                  <span class="font-medium text-orange-600 dark:text-orange-500">@bonnie.green</span
                  >
                  what do you say?
                </div>
                <div class="text-gradient-rock text-xs font-medium">1 hour ago</div>
              </div>
            </a>
            <a href="#" class="flex px-4 py-3 hover:bg-neutral-100 dark:hover:bg-neutral-600">
              <div class="flex-shrink-0">
                <img
                  class="h-11 w-11 rounded-full"
                  src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/robert-brown.png"
                  alt="Robert image"
                />
                <div
                  class="absolute -mt-5 ml-6 flex h-5 w-5 items-center justify-center rounded-full border border-white bg-purple-500 dark:border-neutral-700"
                >
                  <svg
                    aria-hidden="true"
                    class="h-3 w-3 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"
                    ></path>
                  </svg>
                </div>
              </div>
              <div class="w-full pl-3">
                <div class="mb-1.5 text-sm font-normal text-neutral-500 dark:text-neutral-400">
                  <span class="font-semibold text-neutral-900 dark:text-white">Robert Brown</span>
                  posted a new video: Glassmorphism - learn how to implement the new design trend.
                </div>
                <div class="text-gradient-rock text-xs font-medium">3 hours ago</div>
              </div>
            </a>
          </div>
          <a
            href="#"
            class="text-md block bg-neutral-50 py-2 text-center font-medium text-neutral-900 hover:bg-neutral-100 dark:bg-neutral-600 dark:text-white dark:hover:underline"
          >
            <div class="inline-flex items-center">
              <svg
                aria-hidden="true"
                class="mr-2 h-4 w-4 text-neutral-500 dark:text-neutral-400"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                <path
                  fill-rule="evenodd"
                  d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
                  clip-rule="evenodd"></path>
              </svg>
              Voir tout
            </div>
          </a>
        </div>
        <ThemeSwitcher />
        <button
          type="button"
          class="mx-3 flex rounded-full bg-neutral-800 text-sm focus:ring-1 focus:ring-neutral-300 md:mr-0 dark:focus:ring-neutral-600"
          id="user-menu-button"
          aria-expanded="false"
          data-dropdown-toggle="dropdown"
        >
          <span class="sr-only">Open user menu</span>
          <img
            class="h-8 w-8 rounded-full"
            src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/avatars/michael-gough.png"
            alt="user photo"
          />
        </button>
        <!-- Dropdown menu -->
        <div
          class="z-50 my-4 hidden w-56 list-none divide-y divide-neutral-100 rounded-xl bg-white text-base shadow-sm dark:divide-neutral-600 dark:bg-neutral-700"
          id="dropdown"
        >
          <div class="px-4 py-3">
            <span class="block text-sm font-semibold text-neutral-900 dark:text-white"
              >Neil Sims</span
            >
            <span class="block truncate text-sm text-neutral-900 dark:text-white"
              >user@vinylvault.com</span
            >
          </div>
          <ul class="py-1 text-neutral-700 dark:text-neutral-300" aria-labelledby="dropdown">
            <li>
              <a
                href="#"
                class="block px-4 py-2 text-sm hover:bg-neutral-100 dark:text-neutral-400 dark:hover:bg-neutral-600 dark:hover:text-white"
                >My profile</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block px-4 py-2 text-sm hover:bg-neutral-100 dark:text-neutral-400 dark:hover:bg-neutral-600 dark:hover:text-white"
                >Account settings</a
              >
            </li>
          </ul>
          <ul class="py-1 text-neutral-700 dark:text-neutral-300" aria-labelledby="dropdown">
            <li>
              <a
                href="#"
                class="flex items-center px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:hover:text-white"
                ><svg
                  class="mr-2 h-5 w-5 text-neutral-400"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                    clip-rule="evenodd"></path>
                </svg>
                My likes</a
              >
            </li>
            <li>
              <a
                href="#"
                class="flex items-center px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:hover:text-white"
                ><svg
                  class="mr-2 h-5 w-5 text-neutral-400"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"
                  ></path>
                </svg>
                Collections</a
              >
            </li>
            <li>
              <a
                href="#"
                class="flex items-center justify-between px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:hover:text-white"
              >
                <span class="flex items-center">
                  <svg
                    aria-hidden="true"
                    class="mr-2 h-5 w-5 text-orange-600 dark:text-orange-500"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"
                      clip-rule="evenodd"></path>
                  </svg>
                  Pro version
                </span>
                <svg
                  aria-hidden="true"
                  class="h-5 w-5 text-neutral-400"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                    clip-rule="evenodd"></path>
                </svg>
              </a>
            </li>
          </ul>
          <ul class="py-1 text-neutral-700 dark:text-neutral-300" aria-labelledby="dropdown">
            <li>
              <a
                href="#"
                class="block px-4 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-600 dark:hover:text-white"
                >Sign out</a
              >
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Sidebar flottante -->
  <aside
    class="sidebar-mobile fixed top-20 left-0 z-40 h-[calc(100vh-6rem)] w-56 -translate-x-full rounded-2xl border border-neutral-300/40 bg-white/75 shadow-sm backdrop-blur-xl backdrop-saturate-150 transition-all duration-300 sm:top-28 sm:left-6 sm:h-[calc(100vh-8rem)] sm:w-64 md:translate-x-0 dark:border-neutral-700/40 dark:bg-neutral-900/60"
    aria-label="Sidenav"
    id="drawer-navigation"
    transition:name="sidebar"
  >
    <div class="h-full overflow-y-auto bg-transparent px-3 py-3 sm:px-6 sm:py-6">
      <form action="#" method="GET" class="mb-2 md:hidden">
        <label for="sidebar-search" class="sr-only">Rechercher</label>
        <div class="relative">
          <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
            <svg
              class="h-5 w-5 text-neutral-500 dark:text-neutral-400"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
              ></path>
            </svg>
          </div>
          <input
            type="text"
            name="search"
            id="sidebar-search"
            class="block w-full rounded-lg border border-neutral-300 bg-neutral-50 p-2 pl-10 text-sm text-neutral-900 focus:border-orange-500 focus:ring-orange-500 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100 dark:placeholder-neutral-400 dark:focus:border-orange-500 dark:focus:ring-orange-500"
            placeholder="Rechercher"
          />
        </div>
      </form>
      <SidebarMenu currentPath={currentPath} />
      <SidebarSecondaryMenu currentPath={currentPath} />
    </div>
    <SidebarBottomMenu />
  </aside>

  <main
    class="h-auto pt-20 pr-4 pb-4 pl-4 sm:pt-28 sm:pr-6 sm:pb-6 sm:pl-6 md:ml-[17.5rem]"
    transition:name="main-content"
  >
    <slot />
  </main>
</div>

<style>
  /* Gestion de l'espacement mobile pour la sidebar */
  @media (max-width: 767px) {
    .sidebar-mobile:not(.-translate-x-full) {
      left: 1rem !important;
    }
  }
</style>
